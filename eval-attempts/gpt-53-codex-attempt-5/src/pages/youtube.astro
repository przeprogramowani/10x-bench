---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getLatestYouTubeVideos } from "../lib/content";

const videos = await getLatestYouTubeVideos(12);
---

<BaseLayout title="YouTube | Przeprogramowani" description="Najnowsze filmy z kanalu YouTube Przeprogramowani.">
  <section class="frost-card rounded-3xl p-6 sm:p-8">
    <p class="text-sm font-semibold uppercase tracking-wide text-cyan-200">YouTube</p>
    <h1 class="mt-2 text-4xl font-semibold text-slate-100">Najnowsze filmy</h1>
    <p class="mt-3 max-w-3xl text-sm text-slate-300">
      Dane pochodza z oficjalnego feedu kanalu Przeprogramowani:
      <a
        href="https://www.youtube.com/feeds/videos.xml?channel_id=UCb2Y3vMeD6N4WDt5Acw7Arw"
        class="text-cyan-200 hover:text-cyan-100"
      >
        YouTube Atom feed
      </a>.
    </p>
  </section>

  <section class="mt-8 grid gap-4 sm:grid-cols-2 xl:grid-cols-3">
    {
      videos.map((video) => (
        <a
          href={video.url}
          target="_blank"
          rel="noopener noreferrer"
          class="group frost-card overflow-hidden rounded-3xl"
        >
          <img
            src={video.thumbnail}
            alt={video.title}
            loading="lazy"
            class="aspect-video w-full object-cover transition-transform duration-300 group-hover:scale-[1.03]"
          />
          <div class="space-y-3 p-5">
            <p class="text-xs font-semibold uppercase tracking-wide text-cyan-200">
              {new Date(video.publishedAt).toLocaleDateString("pl-PL", {
                day: "2-digit",
                month: "long",
                year: "numeric"
              })}
            </p>
            <h2 class="text-base font-semibold text-slate-100">{video.title}</h2>
          </div>
        </a>
      ))
    }
  </section>
</BaseLayout>
