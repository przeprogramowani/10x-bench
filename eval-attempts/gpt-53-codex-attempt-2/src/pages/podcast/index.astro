---
import Layout from "../../layouts/Layout.astro";
import MediaGrid from "../../components/MediaGrid";
import { getPodcastEpisodes } from "../../lib/content";

export const prerender = false;

const episodes = await getPodcastEpisodes(12);
const latestDate = episodes[0]?.publishedAt;
---

<Layout
  title="Podcast | Przeprogramowani.pl"
  description="Najnowsze odcinki podcastu Przeprogramowani pobierane bezposrednio z naszej aktywnosci online."
>
  <section class="fade-in-up space-y-6">
    <div class="hero-grid rounded-3xl p-6 md:p-9">
      <p class="text-xs font-semibold uppercase tracking-[0.18em] text-cyan-100">Podcast</p>
      <h1 class="mt-2 text-4xl font-bold text-white md:text-5xl">Najnowsze odcinki</h1>
      <p class="mt-4 max-w-3xl text-slate-200">
        Strona automatycznie pobiera najnowsze publikacje z Przeprogramowani na Spotify for Creators.
      </p>
      {
        latestDate ? (
          <p class="mt-4 text-sm text-slate-300">
            Ostatnia aktualizacja danych: {new Intl.DateTimeFormat("pl-PL", { day: "2-digit", month: "long", year: "numeric" }).format(new Date(latestDate))}
          </p>
        ) : null
      }
    </div>

    <MediaGrid
      client:load
      items={episodes}
      initialCount={6}
      emptyMessage="Nie udalo sie pobrac odcinkow podcastu."
    />
  </section>
</Layout>
