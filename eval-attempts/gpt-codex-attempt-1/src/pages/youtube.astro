---
import MainLayout from '../layouts/MainLayout.astro';
import { formatPolishDate, getYouTubeVideos } from '../lib/feeds';

const videos = await getYouTubeVideos(12);
---

<MainLayout
  title="YouTube | Przeprogramowani"
  description="Najnowsze filmy z oficjalnego kanału YouTube Przeprogramowani."
  currentPath="/youtube"
>
  <section class="mx-auto max-w-6xl px-5 pb-8 pt-12">
    <p class="mb-3 text-sm font-semibold uppercase tracking-widest text-rose-200/90">YouTube</p>
    <h1 class="font-display text-4xl font-bold text-white sm:text-5xl">Ostatnie filmy</h1>
    <p class="mt-4 max-w-3xl text-slate-300">
      Lista aktualizowana z oficjalnego feedu kanału YouTube Przeprogramowani.
    </p>
  </section>

  <section class="mx-auto max-w-6xl px-5 pb-16">
    <div class="grid gap-5 sm:grid-cols-2 lg:grid-cols-3">
      {
        videos.map((video) => (
          <a
            href={video.link}
            target="_blank"
            rel="noopener noreferrer"
            class="group overflow-hidden rounded-3xl border border-white/10 bg-slate-900/65 transition hover:border-rose-300/40 hover:bg-slate-900"
          >
            <div class="aspect-video overflow-hidden bg-slate-950">
              <img
                src={video.thumbnail}
                alt={video.title}
                class="h-full w-full object-cover transition duration-300 group-hover:scale-105"
                loading="lazy"
              />
            </div>
            <div class="p-4">
              <p class="line-clamp-3 text-sm font-semibold text-slate-100 group-hover:text-white">{video.title}</p>
              <p class="mt-3 text-xs text-slate-400">{formatPolishDate(video.publishedAt)}</p>
            </div>
          </a>
        ))
      }
    </div>
  </section>
</MainLayout>
