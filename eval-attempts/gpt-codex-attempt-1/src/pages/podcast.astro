---
import MainLayout from '../layouts/MainLayout.astro';
import { formatPolishDate, getPodcastEpisodes } from '../lib/feeds';

const episodes = await getPodcastEpisodes(12);
---

<MainLayout
  title="Podcast | Przeprogramowani"
  description="Najnowsze odcinki podcastu Przeprogramowani pobrane z oficjalnego feedu RSS."
  currentPath="/podcast"
>
  <section class="mx-auto max-w-6xl px-5 pb-8 pt-12">
    <p class="mb-3 text-sm font-semibold uppercase tracking-widest text-teal-200/90">Podcast</p>
    <h1 class="font-display text-4xl font-bold text-white sm:text-5xl">Ostatnie odcinki</h1>
    <p class="mt-4 max-w-3xl text-slate-300">
      Lista aktualizowana na podstawie oficjalnego feedu RSS Przeprogramowani.
    </p>
  </section>

  <section class="mx-auto max-w-6xl px-5 pb-16">
    <div class="grid gap-4 md:grid-cols-2">
      {
        episodes.map((episode) => (
          <a
            href={episode.link}
            target="_blank"
            rel="noopener noreferrer"
            class="group rounded-3xl border border-white/10 bg-slate-900/65 p-5 transition hover:border-teal-300/40 hover:bg-slate-900"
          >
            <p class="line-clamp-3 text-lg font-semibold text-white">{episode.title}</p>
            <div class="mt-4 flex items-center justify-between gap-3 text-sm text-slate-300">
              <span>{formatPolishDate(episode.publishedAt)}</span>
              {episode.duration && <span class="rounded-full border border-white/15 px-3 py-1 text-xs">{episode.duration}</span>}
            </div>
          </a>
        ))
      }
    </div>
  </section>
</MainLayout>
