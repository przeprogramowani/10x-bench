---
import MobileMenu from '../components/MobileMenu';
import { footerLinks, navItems } from '../lib/site-data';
import '../styles/global.css';

interface Props {
  title: string;
  description: string;
}

const { title, description } = Astro.props;
const pathname = Astro.url.pathname;
const normalizedPath = pathname.replace(/\/$/, '') || '/';
---

<html lang="pl">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content={description} />
    <meta name="generator" content={Astro.generator} />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="icon" href="/favicon.ico" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous" />
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&family=Space+Grotesk:wght@500;600;700&display=swap"
      rel="stylesheet"
    />
    <title>{title}</title>
  </head>
  <body>
    <header class="sticky top-0 z-40 border-b border-slate-200/80 bg-white/75 backdrop-blur-xl">
      <div class="section-shell flex h-18 items-center justify-between gap-6 py-3">
        <a href="/" class="font-display text-lg font-semibold tracking-tight text-slate-900">
          Przeprogramowani.pl
        </a>

        <nav class="hidden items-center gap-1 md:flex">
          {
            navItems.map((item) => {
              const href = item.href.replace(/\/$/, '') || '/';
              const isActive = !item.external && href === normalizedPath;

              return (
                <a
                  href={item.href}
                  target={item.external ? '_blank' : undefined}
                  rel={item.external ? 'noopener noreferrer' : undefined}
                  class:list={[
                    'rounded-xl px-3 py-2 text-sm font-medium transition-colors',
                    isActive
                      ? 'bg-cyan-500/10 text-cyan-700'
                      : 'text-slate-700 hover:bg-slate-100 hover:text-slate-900'
                  ]}
                >
                  {item.label}
                </a>
              );
            })
          }
        </nav>

        <MobileMenu links={navItems} currentPath={pathname} client:load />
      </div>
    </header>

    <main>
      <slot />
    </main>

    <footer class="mt-20 border-t border-slate-200 bg-white/70 py-10">
      <div class="section-shell flex flex-col gap-8 sm:flex-row sm:items-end sm:justify-between">
        <div>
          <p class="font-display text-lg font-semibold text-slate-900">Przeprogramowani</p>
          <p class="mt-2 max-w-lg text-sm text-slate-600">
            Szersze spojrzenie na programowanie: edukacja, podcasty, YouTube i programy rozwojowe dla developerow.
          </p>
          <a href="mailto:kontakt@przeprogramowani.pl" class="mt-3 inline-block text-sm font-semibold text-cyan-700">
            kontakt@przeprogramowani.pl
          </a>
        </div>

        <div class="flex flex-wrap gap-3">
          {
            footerLinks.map((item) => (
              <a
                href={item.href}
                target="_blank"
                rel="noopener noreferrer"
                class="rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm font-medium text-slate-700 hover:border-cyan-300 hover:text-cyan-700"
              >
                {item.label}
              </a>
            ))
          }
        </div>
      </div>
    </footer>
  </body>
</html>
