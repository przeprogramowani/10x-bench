---
import MainLayout from "../layouts/MainLayout.astro";
import FeedList from "../components/FeedList";
import { formatPolishDate, getPodcastEpisodes } from "../lib/feeds";
import { site } from "../data/site";

const episodes = await getPodcastEpisodes(6);
---

<MainLayout title="Podcast | Przeprogramowani" description="Najnowsze odcinki podcastu Przeprogramowani.">
  <section>
    <p class="text-sm font-semibold uppercase tracking-[0.16em] text-[var(--accent)]">Podcast</p>
    <h1 class="mt-3 text-4xl font-extrabold text-white">Ostatnie odcinki</h1>
    <p class="mt-4 max-w-2xl text-soft">
      Rozmowy o technologii, rozwoju kariery i praktycznej stronie programowania.
      {episodes[0] ? ` Najnowsza publikacja: ${formatPolishDate(episodes[0].publishedAt)}.` : ""}
    </p>
    <div class="mt-8">
      <FeedList
        items={episodes}
        emptyMessage="Aktualnie nie udało się pobrać odcinków. Zobacz pełną listę na Spotify."
        ctaLabel="Słuchaj odcinka"
      />
    </div>
    <a
      href={site.social.spotify}
      target="_blank"
      rel="noreferrer"
      class="mt-8 inline-flex rounded-full border border-white/25 px-5 py-3 text-sm font-semibold text-white transition hover:border-white/60"
    >
      Przejdź do podcastu na Spotify
    </a>
  </section>
</MainLayout>
